/*! Jets.js - v0.1.0 - 2015-09-10
* http://NeXTs.github.com/Jets.js/
* Copyright (c) 2015 Denis Lukov; Licensed MIT */

;(function(f,b){"undefined"!=typeof module?module.exports=b():"function"==typeof define&&"object"==typeof define.amd?define(b):this[f]=b()})("Jets",function(){function f(b){if(!(this instanceof f))return new f(b);var a=this;["searchTag","contentTag"].forEach(function(d){var g=d.replace("Tag","");a[g+"_tag"]=document.querySelector(b[d]);a[g+"_param"]=b[d];if(!a[g+"_tag"])throw Error("Error! Could not find "+d+" element");});a.options={};["columns","addImportant","searchSelector","manualContentHandling"].forEach(function(d){a.options[d]=
b[d]});var c,h=function(){c!=(c=a.search_tag.value)&&a._applyCSS()};a._onSearch=function(b){if("keydown"==b.type)return setTimeout(h,0);h()};a.destroy=function(){a._processEventListeners("remove");a._destroy()};a._processEventListeners("add");a._addStyleTag();a._setJets();a._applyCSS()}f.prototype={constructor:f,_processEventListeners:function(b){["input","keydown","change"].forEach(function(a){this.search_tag[b+"EventListener"](a,this._onSearch)}.bind(this))},_applyCSS:function(){var b=this.search_tag.value.trim().toLowerCase(),
a=this.content_param+">:not([data-jets"+(this.options.searchSelector||"*")+'="'+b+'"]){display:none'+(this.options.addImportant?"!important":"")+"}";this.styleTag.innerHTML=b?a:""},_addStyleTag:function(){this.styleTag=document.createElement("style");document.head.appendChild(this.styleTag)},_getText:function(b){return b&&(b.innerText||b.textContent)||""},_getContentTags:function(b){return Array.prototype.slice.call(this.content_tag.querySelectorAll(b||":scope > *"))},_setJets:function(b,a){for(var c=
this,h=c._getContentTags(a?"":b),d,g=0,e;e=h[g];g++)if(!e.hasAttribute("data-jets")||a)d=this.options.manualContentHandling?this.options.manualContentHandling(e):c.options.columns&&c.options.columns.length?c.options.columns.map(function(b){return c._getText(e.children[b])}).join(" "):c._getText(e),e.setAttribute("data-jets",d.trim().replace(/\s+/g," ").toLowerCase())},update:function(b){this._setJets(":scope > :not([data-jets])",b)},_destroy:function(){this.styleTag.parentNode&&document.head.removeChild(this.styleTag);
for(var b=this._getContentTags(),a=0,c;c=b[a];a++)c.removeAttribute("data-jets")}};(function(b,a){try{b.querySelector(":scope body")}catch(c){["querySelector","querySelectorAll"].forEach(function(c){var d=a[c];a[c]=function(a){if(/(^|,)\s*:scope/.test(a)){var e=this.id;this.id="ID_"+Date.now();a=a.replace(/((^|,)\s*):scope/g,"$1#"+this.id);a=b[c](a);this.id=e;return a}return d.call(this,a)}})}})(window.document,Element.prototype);return f});